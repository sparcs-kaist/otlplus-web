@use 'global';

@use 'abstracts/color' as color;
@use 'abstracts/font' as font;

@import './abstracts/_variables.scss';
@import './abstracts/_mixins.scss';

:global(.ScrollbarsCustom-Wrapper) {
  position: relative !important;
}

:global(.ScrollbarsCustom-Scroller) {
  position: relative !important;
}

:global(.noY .ScrollbarsCustom-Wrapper) {
  position: initial !important;
}

:global(.ScrollbarsCustom-Thumb)::before {
  content: '';
  position: absolute;
  display: block;
  top: -4px;
  bottom: -4px;
  left: -4px;
  right: -4px;
}

.content {
  position: relative;
  margin-left: auto;
  margin-right: auto;
  header + & {
    margin-top: $header-height;
  }
  @include mixin-media-landscape {
    width: calc(
      #{$content-width-desktop} + (#{$section-margin-lr} * 2) + (env(safe-area-inset-left) +
            env(safe-area-inset-right))
    );
  }
  @include mixin-media-portrait {
    width: 100%;
  }

  &--no-scroll {
    position: absolute;
    top: 0;
    bottom: 0;
    left: 0;
    right: 0;
    > .page-grid {
      height: 100%;
      padding-bottom: $section-margin-bottom;
    }
  }
}

.page-grid {
  display: grid;
  padding-left: $section-margin-lr;
  padding-right: $section-margin-lr;

  > * {
    overflow: hidden;
  }

  &--full {
    @include mixin-media-landscape {
      grid-template-columns: 1fr;
      grid-template-rows: 1fr;
      grid-template-areas: 'full';
    }
    @include mixin-media-portrait {
      grid-template-columns: 1fr;
      grid-template-rows: 1fr;
      grid-template-areas: 'full';
    }
  }

  &--timetable {
    @include mixin-media-landscape {
      margin-left: -$tabs-width-vertical;
      grid-template-columns:
        $tabs-width-vertical
        $section-width-desktop-1v3-left
        $section-margin-lr
        1fr;
      grid-template-rows:
        $tabs-height-horizontal
        calc(#{$section-height-desktop-lecture-detail} - #{$tabs-height-horizontal})
        $section-margin-bottom
        1fr;
      grid-template-areas:
        '.                  lecture-detail .   semester-and-timetable-tabs'
        '.                  lecture-detail .   timetable-and-infos'
        '.                  .              .   timetable-and-infos'
        'lecture-list-tabs  lecture-list   .   timetable-and-infos';
    }
    @include mixin-media-portrait {
      padding-bottom: 0px !important;
      grid-template-columns: 1fr;
      grid-template-rows:
        1fr
        $section-margin-bottom
        0
        0fr
        0;
      grid-template-areas:
        'timetable-and-infos'
        '.'
        'lecture-list-tabs'
        'lecture-list'
        '.';
      transition: grid-template-rows $transition-duration-normal ease-out;
      &--mobile-expanded {
        grid-template-rows:
          1fr
          $section-margin-bottom
          $tabs-height-horizontal
          1fr
          $section-margin-bottom;
      }
    }
  }

  &--dictionary {
    @include mixin-media-landscape {
      margin-left: -$tabs-width-vertical;
      grid-template-columns:
        $tabs-width-vertical
        1fr
        $section-margin-lr
        1fr;
      grid-template-rows: 1fr;
      grid-template-areas: 'course-list-tabs   course-list .   course-detail';
    }
    @include mixin-media-portrait {
      grid-template-columns: 1fr;
      grid-template-rows:
        $tabs-height-horizontal
        1fr;
      grid-template-areas:
        'course-list-tabs'
        'course-list';
    }
  }

  &--syllabus {
    @include mixin-media-landscape {
      width: calc(900px + #{$section-padding} * 2);
      grid-template-columns: 1fr;
      grid-template-rows:
        $tabs-height-horizontal
        1fr;
      grid-template-areas:
        'syllabus-tabs'
        'syllabus';
    }
    @include mixin-media-portrait {
      grid-template-columns: 1fr;
      grid-template-rows:
        $tabs-height-horizontal
        1fr;
      grid-template-areas:
        'syllabus-tabs'
        'syllabus';
    }
  }

  &--write-reviews {
    @include mixin-media-landscape {
      grid-template-columns:
        $section-width-desktop-1v3-left
        $section-margin-lr
        1fr;
      grid-template-rows: 1fr;
      grid-template-areas: 'write-reviews-left .   write-reviews-right';
    }
    @include mixin-media-portrait {
      grid-template-columns: 1fr;
      grid-template-rows: 1fr;
      grid-template-areas: 'write-reviews-left';
    }
  }
}

.tabs {
  font-size: font.$size-small;
  line-height: font.$line-height-small;
  color: color.$text-light;
  overflow: hidden;

  & .tabs__elem {
    padding: $tab-padding;
    text-align: center;
    background-color: color.$tab-background-dark;
    white-space: nowrap;
    display: inline-block;
    @include mixin-media-landscape {
      touch-action: pinch-zoom;
    }
    @include mixin-media-portrait {
      touch-action: pan-x pinch-zoom;
    }
    &.tabs__elem--selected {
      background-color: color.$tab-background;
      color: color.$text-normal;
    }
    &:not(.tabs__elem--selected) {
      cursor: pointer;
      &:hover {
        background-color: color.$tab-background-darker;
      }
    }
    &.tabs__elem--draggable {
      &.tabs__elem--selected:not(.tabs__elem--dragging) {
        cursor: grab;
      }
    }
    &.tabs__elem--dragging {
      cursor: grabbing;
      opacity: 0.7;
      position: relative;
    }
  }

  &--course-list,
  &--lecture-list {
    & .tabs__flexbox {
      @include mixin-media-portrait {
        display: flex;
        flex-direction: row;
      }
    }

    & .tabs__elem {
      @include mixin-media-landscape {
        margin-left: auto;
        margin-bottom: $tab-margin;
        border-radius: $tab-border-radius 0 0 $tab-border-radius;
        line-height: 0;
      }
      @include mixin-media-portrait {
        margin-right: $tab-margin;
        border-radius: $tab-border-radius $tab-border-radius 0 0;
        flex: 1 1 0;
        &:last-child {
          margin-right: 0;
        }
      }

      & > span {
        margin-left: 6px;

        @include mixin-media-landscape {
          display: none;
        }
      }
    }
  }

  &--lecture-list {
    grid-area: lecture-list-tabs;
  }

  &--course-list {
    grid-area: course-list-tabs;
  }

  &--timetable {
    grid-area: timetable-tabs;

    & .tabs__elem {
      display: inline-block;
      vertical-align: top;
      margin-right: $tab-margin;
      border-radius: $tab-border-radius $tab-border-radius 0 0;
      padding: $tab-padding ($tab-padding + 2px);
      display: inline-flex;
      flex-direction: row;
      justify-content: center;
      @include mixin-media-portrait {
        width: 100%;
        padding: $block-padding-tb $block-padding-lr;
        background-color: color.$block-background;
        margin-bottom: $block-margin;
        border-radius: $block-border-radius;
        text-align: left;
        &.tabs__elem--selected {
          background-color: color.$block-background-dark;
        }
        &:not(.tabs__elem--selected) {
          &:hover {
            background-color: color.$block-background-dark;
          }
        }
      }
      &:not(.tabs__elem--selected) {
        & > button {
          @include mixin-media-landscape {
            display: none;
          }
        }
      }
      &--add-button {
        padding: $tab-padding;
        line-height: 0;
        @include mixin-media-portrait {
          margin-bottom: 0;
        }
      }

      & > span {
        flex: 1 1 auto;
      }

      & > button {
        color: color.$text-light;
        @include mixin-media-landscape {
          margin-left: 4px;
        }
        @include mixin-media-portrait {
          margin-left: 8px;
        }
        &:hover {
          color: color.$text-dark;
        }

        & > span {
          margin-left: 4px;
          @include mixin-media-landscape {
            display: none;
          }
        }
      }
    }
  }

  &--planner {
    grid-area: planner-tabs;

    @include mixin-media-portrait {
      // TODO: Remove this after mobile UI implemented
      display: none;
    }

    & .tabs__elem {
      display: inline-block;
      vertical-align: top;
      margin-right: $tab-margin;
      border-radius: $tab-border-radius $tab-border-radius 0 0;
      padding: $tab-padding ($tab-padding + 2px);
      display: inline-flex;
      flex-direction: row;
      justify-content: center;
      @include mixin-media-portrait {
        width: 100%;
        padding: $block-padding-tb $block-padding-lr;
        background-color: color.$block-background;
        margin-bottom: $block-margin;
        border-radius: $block-border-radius;
        text-align: left;
        &.tabs__elem--selected {
          background-color: color.$block-background-dark;
        }
        &:not(.tabs__elem--selected) {
          &:hover {
            background-color: color.$block-background-dark;
          }
        }
      }
      &:not(.tabs__elem--selected) {
        & > button {
          @include mixin-media-landscape {
            display: none;
          }
        }
      }
      &--add-button {
        padding: $tab-padding;
        line-height: 0;
        @include mixin-media-portrait {
          margin-bottom: 0;
        }
      }

      & > span {
        flex: 1 1 auto;
      }

      & > button {
        color: color.$text-light;
        @include mixin-media-landscape {
          margin-left: 4px;
        }
        @include mixin-media-portrait {
          margin-left: 8px;
        }
        &:hover {
          color: color.$text-dark;
        }

        & > span {
          margin-left: 4px;
          @include mixin-media-landscape {
            display: none;
          }
        }
      }
    }
  }

  &--syllabus {
    grid-area: syllabus-tabs;
    white-space: nowrap;

    & .tabs__elem {
      display: inline-block;
      vertical-align: top;
      margin-right: $tab-margin;
      border-radius: $tab-border-radius $tab-border-radius 0 0;
      padding: $tab-padding ($tab-padding + 2px);

      &:last-child {
        margin-right: 0;
      }
    }
  }
}

.section {
  position: relative;
  padding: $section-padding;
  background-color: color.$section-background;
  border-radius: $section-border-radius;
  box-shadow: $section-box-shadow;
  overflow: hidden;

  &--modal {
    position: absolute;
    width: initial;
    height: initial;
    z-index: 200;
    box-shadow:
      $section-box-shadow,
      0 0 0 1000px rgba(#000, 0.3);
    top: $section-margin-top;
    bottom: calc(#{$section-margin-bottom} * 2 + env(safe-area-inset-bottom));
    left: calc(#{$section-margin-lr} * 2 + env(safe-area-inset-left));
    right: calc(#{$section-margin-lr} * 2 + env(safe-area-inset-right));
  }

  &--transparent {
    padding: initial !important;
    background-color: initial;
    border-radius: initial;
    background-origin: initial;
    box-shadow: initial;
  }

  &--main-search {
    margin: 0 auto;
    @include mixin-media-landscape {
      width: calc(#{$content-width-desktop});
    }
    @include mixin-media-portrait {
      width: calc(100% - #{$section-margin-lr} * 2);
    }
  }

  &--feed {
    margin-bottom: $section-margin-bottom;
  }

  &--course-list {
    grid-area: course-list;
    @include mixin-media-landscape {
      border-top-left-radius: 0;
    }
    @include mixin-media-portrait {
      border-top-left-radius: 0;
      border-top-right-radius: 0;
    }
  }

  &--course-detail {
    @include mixin-media-landscape {
      grid-area: course-detail;
    }
  }

  &--timetable-and-infos {
    display: grid;
    grid-area: timetable-and-infos;
    @include mixin-media-landscape {
      border-top-left-radius: 0;
      grid-template-columns: 1fr min-content calc(
          #{$section-width-desktop-1v3-left} - (#{$section-padding} * 2)
        );
      grid-template-rows: min-content min-content min-content min-content 1fr min-content min-content;
      grid-template-areas:
        'timetable  divider-main    map'
        'timetable  divider-main    divider-sub-1'
        'timetable  divider-main    summary'
        'timetable  divider-main    divider-sub-2'
        'timetable  divider-main    exam'
        'timetable  divider-main    divider-sub-3'
        'timetable  divider-main    share';
    }
    @include mixin-media-portrait {
      grid-template-columns: 1fr;
      grid-template-rows: 1fr min-content min-content min-content min-content;
      grid-template-areas:
        'timetable'
        'divider-main'
        'summary'
        'divider-sub-3'
        'share';
    }
  }

  &--semester-and-timetable-list {
    display: grid;
    @include mixin-media-landscape {
      border-top-left-radius: 0;
      grid-area: semester-and-timetable-tabs;
      grid-template-columns: 1fr 8px min-content;
      grid-template-rows: min-content 1fr;
      grid-template-areas:
        'timetable-tabs .   semester'
        'timetable-tabs .   .';
    }
    @include mixin-media-portrait {
      grid-template-columns: 1fr min-content 1fr;
      grid-template-rows: min-content 12px 1fr;
      grid-template-areas:
        '.              semester        .'
        '.              .               .'
        'timetable-tabs timetable-tabs  timetable-tabs';
    }
  }

  &--lecture-detail {
    @include mixin-media-landscape {
      grid-area: lecture-detail;
    }
    @include mixin-media-portrait {
    }
  }

  &--lecture-list {
    position: relative;
    grid-area: lecture-list;
    @include mixin-media-landscape {
      border-top-left-radius: 0;
    }
    @include mixin-media-portrait {
      border-top-left-radius: 0;
      border-top-right-radius: 0;

      .page-grid--timetable:not(.page-grid--timetable--mobile-expanded) & {
        padding-top: 0px;
        padding-bottom: 0px;
      }
    }
  }

  &--track-settings {
    display: flex;
    flex-direction: column;
  }

  &--syllabus {
    grid-area: syllabus;
    border-top-left-radius: 0;
    border-top-right-radius: 0;
  }

  &--write-reviews-left {
    grid-area: write-reviews-left;
    display: flex;
    flex-direction: column;
  }

  &--write-reviews-right {
    @include mixin-media-landscape {
      grid-area: write-reviews-right;
    }
  }

  &--account {
    display: flex;
    flex-direction: column;
  }
}

.subsection {
  width: 100%;
  height: 100%;

  &--flex {
    display: flex;
    flex-direction: column;
  }

  &--lecture-detail {
    &__mobile-buttons {
      text-align: right;
    }
  }

  &--lecture-list {
    &__selector {
      position: absolute;
      top: calc((100% + #{font.$line-height-big} + #{$list-title-margin-bottom} - 12px) / 2);
      right: #{$section-padding};
      display: none;
      @include mixin-media-no-hover {
        display: initial;
      }

      &--dimmed {
        opacity: 0.3;
      }
    }

    & > div:last-child {
      @include mixin-media-no-hover {
        .block--lecture-group {
          margin-right: 6px + 10px;
          &:first-child {
            margin-top: calc(
              (
                  (#{$screen-height} - #{$header-height} - (#{$section-margin-bottom} * 2)) / 2 -
                    (
                      #{$tabs-height-horizontal} + (#{$section-padding} * 2) + (#{font.$line-height-big} +
                            #{$list-title-margin-bottom})
                    )
                ) / 2 -
                (
                  (#{font.$line-height-smaller} / 2) + (6px * 2) + 1px + #{font.$line-height-normal} +
                    #{$block-padding-tb}
                )
            );
          }
          &:last-child {
            margin-bottom: calc(
              (
                  (#{$screen-height} - #{$header-height} - (#{$section-margin-bottom} * 2)) / 2 -
                    (
                      #{$tabs-height-horizontal} + (#{$section-padding} * 2) + (#{font.$line-height-big} +
                            #{$list-title-margin-bottom})
                    )
                ) / 2 - (#{calc(font.$line-height-smaller / 2)} + #{$block-padding-tb}) + #{$section-padding}
            );
          }
        }
      }
    }
  }

  &--summary {
    grid-area: summary;
    display: flex;
    flex-direction: column;
    @include mixin-media-portrait {
      flex-direction: row;
    }

    & > * {
      flex: none;
    }

    &__type {
      display: flex;
      flex-direction: row;
      @include mixin-media-portrait {
        flex-direction: column;
        flex: 3 3 (40px * 3);
      }

      & > div {
        flex: none;
        width: 40%;
        display: flex;
        flex-direction: column;
        white-space: nowrap;
        @include mixin-media-portrait {
          flex-direction: row;
          width: 100%;
          margin-left: 0;
          &:not(:last-child) {
            margin-bottom: $attribute-margin-bottom;
          }
        }
        @include mixin-media-landscape {
          &:first-child {
            margin-left: 10%;
          }
        }
      }
    }
  }

  &--exam {
    grid-area: exam;
    display: flex;
    flex-direction: column;
    min-height: calc(
      (#{font.$line-height-normal} + #{$title-margin-bottom}) +
        (#{font.$line-height-normal} + 2px + #{font.$line-height-normal})
    );

    &__title {
      flex: 0 0 auto;
      text-align: center;
      font-size: font.$size-normal;
      line-height: font.$line-height-normal;
      margin-bottom: $title-margin-bottom;
    }

    &__content {
      flex: 1 1 auto;
      height: 0;
      display: flex;
      flex-direction: column;

      .subsection--exam__content__day {
        display: flex;
        flex-direction: row;
        width: 100%;
        &:not(:last-child) {
          margin-bottom: $attribute-margin-bottom;
        }

        & > div:first-child {
          flex: 0 0 auto;
          margin-right: $attribute-name-margin-right;
          white-space: nowrap;
          &.fixed-ko {
            min-width: 12px;
          }
          &.fixed-en {
            min-width: 23px;
          }
        }

        & > ul:last-child {
          flex: 1 1 auto;
          padding-left: 0;
          margin-bottom: 0;

          & > li {
            &:not(:last-child) {
              margin-bottom: $attribute-info-margin-between;
            }

            &.focused {
              color: color.$highlight;
            }

            & > div:first-child {
              font-weight: bold;
              margin-bottom: 2px;
            }
          }
        }
      }
    }
  }

  &--my-summary {
    height: initial;
  }

  &--taken-lectures {
    flex: 1 1;
    display: flex;
    flex-direction: column;
  }

  &--reviews-menus {
    height: initial;

    & > div:not(:first-child) {
      margin-top: 8px;
    }
  }

  &--various-reviews {
    display: flex;
    flex-direction: column;
  }

  &--my-info {
    .caption {
      margin-top: 8px;
    }
  }

  &--academic-info {
    .caption {
      margin-top: 8px;
    }
  }

  &--main-search {
    display: flex;
    font-size: font.$size-big;
    line-height: font.$line-height-big;

    i {
      flex: 0 0 auto;
      margin-right: 8px;
      width: 13px;
      background: url(../static/icons/tab_search.svg) no-repeat center center;
    }

    input {
      flex: 1 1 auto;
    }

    input::placeholder {
      color: color.$text-placeholder;
    }

    button {
      flex: 0 0 auto;
      margin-left: 8px;
    }
  }

  &--todays-timetable {
    width: calc(100% + (#{$section-padding} * 2));
    margin: 0 (-$section-padding);
    padding: 0 $section-padding;
    overflow: hidden;

    &__table {
      margin: 0 calc(calc(5px - 1px) / 2);

      &__label {
        display: flex;
        flex-direction: row;
        height: font.$line-height-smallest;
        margin-bottom: 4px;

        &__line {
          flex: none;
          width: 1px;

          > span,
          > strong {
            text-align: center;
            color: color.$text-light;
            font-size: font.$size-smallest;
            line-height: font.$line-height-smallest;
            display: block;
            margin: 0 -5px;
          }
        }

        &__cell {
          flex: none;
          @include mixin-media-landscape {
            width: 7vh;
          }
          @include mixin-media-portrait {
            width: 15vw;
          }
        }
      }

      &__body {
        display: flex;
        flex-direction: row;
        height: (3px * 2) + ($tile-padding-tb * 2) + (font.$line-height-small * 3) + (1px * 2);

        &__line {
          flex: none;
          width: 1px;
          border-left: 1px solid color.$normal-line;
          &--bold {
            border-left-color: color.$normal-line-dark;
          }
          &--dashed {
            border-left-style: dashed;
          }
        }

        &__cell {
          flex: none;
          @include mixin-media-landscape {
            width: 7vh;
          }
          @include mixin-media-portrait {
            width: 15vw;
          }
        }
      }
    }

    &__bar {
      position: absolute;
      text-align: center;
      z-index: 4;

      & > div:first-child {
        width: 5px;
        height: 5px;
        background-color: color.$highlight;
        border-radius: 50%;
      }

      & > div:last-child {
        width: 1px;
        height: 57px - 5px + 2px;
        margin: 0 2px;
        background-color: color.$highlight;
      }
    }
  }

  &--credit {
    display: flex;
    flex-direction: column;

    &__people-list {
      text-align: center;

      &__group {
        &:not(:last-child) {
          margin-bottom: 12px;
        }

        .title {
          margin-bottom: 0;
        }

        &__elem {
          margin-top: 6px;

          & > img {
            height: 22px;
            vertical-align: top;
          }

          & > .caption {
            margin-top: 2px;
          }
        }
      }
    }
  }

  &--syllabus {
    iframe {
      width: 100%;
      height: 100%;
    }
  }

  &--notice {
    &__content {
      line-height: font.$line-height-normal + font.$delta-line-height-longcontent;
    }
  }

  &--eventbanner {
    height: unset;

    & > img {
      width: 100%;
    }

    .button-group {
      padding: 12px;
      padding-bottom: 6px;
      display: flex;
      align-items: center;
      justify-content: flex-end;
      gap: 12px;
      button {
        color: color.$highlight;
      }
    }
  }

  &--campaign {
    color: red;
  }

  &--course-manage-right {
    flex-basis: calc(#{$section-width-desktop-1v3-left} - (#{$section-padding} * 2));
    display: flex;
    flex-direction: column;
  }

  &--planner {
    grid-area: planner;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    position: relative;

    &__table {
      display: flex;
      flex-direction: row;
      height: 100%;

      &__label {
        display: flex;
        flex-direction: column;
        width: 10px + 8px + 1px;
        padding-right: 8px;
        border-right: 1px solid color.$normal-line;

        &__toptitle {
          flex: none;
          height: font.$line-height-smallest + 6px;

          &:has(+ &) {
            height: font.$line-height-smallest + 4px;
          }
        }

        &__bottomtitle {
          flex: none;
          height: font.$line-height-smallest + 6px;

          & + & {
            height: font.$line-height-smallest + 4px;
          }
        }

        &__year {
          flex: none;
          height: font.$line-height-smallest;
        }

        &__line {
          flex: none;
          height: 1px;

          > span,
          > strong {
            width: 100%;
            text-align: right;
            color: color.$text-light;
            font-size: font.$size-smallest;
            line-height: font.$line-height-smallest;
            display: block;
            margin-top: calc(calc(font.$line-height-smallest / 2) * -1) + 1px;
          }
        }

        &__cell {
          flex: auto;
        }
      }

      &__body {
        display: flex;
        flex-direction: column;
        padding: 0 6px;
        margin-right: 0px;
        flex: 1 1 0;
        border-right: 1px solid color.$normal-line;
        &:last-child {
          margin-right: 0;
        }

        &__toptitle,
        &__bottomtitle,
        &__year {
          flex: none;
          font-size: font.$size-smallest;
          line-height: font.$line-height-smallest;
          color: color.$text-lighter;

          & > span:last-child {
            float: right;
          }
        }

        &__toptitle {
          height: font.$line-height-smallest + 6px;
          padding-bottom: 6px;

          &:has(+ &) {
            height: font.$line-height-smallest + 4px;
            padding-bottom: 4px;
          }
        }

        &__bottomtitle {
          height: font.$line-height-smallest + 6px;
          padding-top: 6px;

          & + & {
            height: font.$line-height-smallest + 4px;
            padding-top: 4px;
          }
        }

        &__year {
          flex: none;
          height: font.$line-height-smallest;
          padding: 0;
          text-align: center;
          font-size: font.$size-smaller;
          font-weight: bold;
          line-height: font.$line-height-smaller;
          color: color.$text-normal;
        }

        &__line {
          flex: none;
          height: 1px;
          margin: 0 1px;
          border-bottom: 1px solid color.$normal-line;
          &--bold {
            border-bottom-color: color.$normal-line-dark;
          }
          &--dashed {
            border-bottom-style: dashed;
          }
          &--mobile-noline {
            @include mixin-media-portrait {
              border-bottom: none;
            }
          }
        }

        &__cell {
          flex: auto;
          margin: 0 1px;
        }
      }
    }
  }

  &--track {
    grid-area: track;
  }

  &--planner-summary {
    grid-area: planner-summary;
    display: flex;
    flex-direction: column;
  }

  &--planner-share {
    grid-area: planner-share;
  }

  &--privacy {
    display: flex;
    flex-direction: column;

    &__content {
      line-height: font.$line-height-normal + font.$delta-line-height-longcontent;

      a {
        text-decoration: underline;
      }

      ul {
        padding-left: 8px;
        list-style-position: inside;
      }

      & > p,
      & > ul {
        margin-bottom: 2px;
      }

      & > ul {
        list-style-type: disc;

        & > li > ul {
          list-style-type: circle;

          & > li > ul {
            list-style-type: square;
          }
        }
      }
    }
  }
}

.tile {
  $opacity-temp: 0.8;

  position: absolute;
  flex: auto;
  display: flex;
  flex-direction: column;
  justify-content: center;
  padding: 0px;
  border-radius: $tile-border-radius;
  z-index: 2;
  overflow: hidden;
  font-size: font.$size-small;
  line-height: font.$line-height-small;
  transition:
    margin $transition-duration-short ease-out,
    box-shadow $transition-duration-short ease-out;
  &.tile--highlighted {
    background: color.$tile-background-highlight !important;
  }
  &.tile--raised {
    margin-top: -$offset-raise;
    margin-bottom: $offset-raise;
    box-shadow: 0 6px 3px -3px color.$block-shadow-highlight;
  }
  &.tile--temp {
    background-color: color.$tile-background-highlight;
    opacity: $opacity-temp;
    z-index: 3;
    cursor: initial;
  }
  &.tile--dimmed {
    opacity: 0.5;
    cursor: initial;
  }

  &--timetable {
    cursor: pointer;

    &__button {
      top: 0px;
      right: 0px;
      position: absolute;
      cursor: pointer;
      padding: 4px;
      background-color: rgba(color.$tile-background-highlight, $opacity-text-overlay);
      .tile--timetable:not(:hover) &,
      .tile--timetable:not(.tile--highlighted):not(.tile--raised) & {
        display: none;
      }
      @include mixin-media-portrait {
        display: none;
      }
    }

    &__content {
      padding: $tile-padding-tb $tile-padding-lr;
      overflow: hidden;
      max-height: 100%;

      &__title {
        color: rgba(#000000, 0.8);
        margin: 0;
        margin-bottom: 1px;
        pointer-events: none;
        .tile--timetable.tile--highlighted &,
        .tile--timetable.tile--raised &,
        .tile--timetable.tile--temp & {
          color: rgba(#ffffff, 0.9);
        }
      }

      &__info {
        color: rgba(#000000, 0.5);
        margin: 0;
        margin-top: 1px;
        pointer-events: none;
        .tile--timetable.tile--highlighted &,
        .tile--timetable.tile--raised &,
        .tile--timetable.tile--temp {
          color: rgba(#ffffff, 0.6);
        }
      }
    }

    &__occupied-area {
      background-color: #888;
      position: absolute;
      left: 0;
      width: 100%;
      z-index: -1;
      border-radius: $tile-border-radius;
    }
  }

  &--timetable-drag {
    background-color: rgba(color.$tile-background-highlight, $opacity-temp);
    pointer-events: none;
    z-index: 1;
  }

  &--horizonatal-timetable {
    overflow: hidden;

    &__content {
      padding: $tile-padding-tb $tile-padding-lr;
      overflow: hidden;
      max-height: 100%;

      &__title {
        color: rgba(#000000, 0.8);
        margin: 0;
        margin-bottom: 1px;
      }

      &__info {
        color: rgba(#000000, 0.5);
        margin: 0;
        margin-top: 1px;
      }
    }
  }

  &--planner {
    cursor: pointer;

    &__button {
      top: 0px;
      right: 0px;
      position: absolute;
      cursor: pointer;
      padding: 4px;
      background-color: rgba(color.$tile-background-highlight, $opacity-text-overlay);
      .tile--planner:not(:hover) &,
      .tile--planner:not(.tile--highlighted):not(.tile--raised) & {
        display: none;
      }
      @include mixin-media-portrait {
        display: none;
      }
    }

    &__content {
      padding: $tile-padding-tb $tile-padding-lr;
      overflow: hidden;
      max-height: 100%;
      display: flex;
      flex-direction: row;

      &__title {
        flex: 1 1 auto;
        color: rgba(#000000, 0.8);
        margin: 0;
        pointer-events: none;
        .tile--planner.tile--highlighted &,
        .tile--planner.tile--raised &,
        .tile--planner.tile--temp & {
          color: rgba(#ffffff, 0.9);
        }
        .tile--planner.tile--planner--excluded & {
          opacity: 0.5;
          text-decoration: line-through;
        }
      }

      &__label {
        $size: font.$line-height-normal;
        $padding-tb-base: calc(calc($size - font.$line-height-smallest) / 2);
        $offset-y: 1px;

        flex: 0 0 auto;
        width: $size;
        height: $size;
        margin-left: 3px;
        border-radius: 50%;
        text-align: center;
        padding: ($padding-tb-base + $offset-y) 0 ($padding-tb-base - $offset-y) 0;
        font-weight: bold;
        font-size: font.$size-smallest;
        line-height: font.$line-height-smallest;
        color: #ffffff;

        .tile--highlighted & {
          background-color: adjust-color(
            color.$highlight,
            $saturation: -5%,
            $lightness: -10%
          ) !important;
        }
      }
    }
  }
}

.close-button-wrap {
  position: absolute;
  z-index: 90;
  top: 0;
  right: $section-padding;

  display: block;

  padding: $section-padding 0 ($section-padding - 2px) ($section-padding - 2px);

  background-color: rgba(color.$section-background, $opacity-text-overlay);

  .section--modal & {
    z-index: 290;
  }

  @include mixin-media-landscape {
    display: none;

    .section--modal & {
      display: initial;
    }
  }
}

.block {
  background-color: color.$block-background;
  border-radius: $block-border-radius;
  font-size: font.$size-normal;
  line-height: font.$line-height-normal;
  display: block;
  padding: $block-padding-tb $block-padding-lr;
  position: relative;
  top: 0;
  overflow: hidden;
  transition:
    top $transition-duration-short ease-out,
    box-shadow $transition-duration-short ease-out;
  &[href]:not(.block--dimmed):hover,
  &.block--clickable:not(.block--dimmed):hover {
    background-color: color.$block-background-dark;
  }
  &.block--raised {
    background-color: color.$block-background-dark;
    position: relative;
    top: -$offset-raise;
    box-shadow: 0 6px 3px -3px color.$block-shadow-dark;
  }
  &.block--dimmed {
    opacity: 0.5;
    cursor: initial;
  }
  &.block--completed {
    &:not(.block--raised) {
      color: rgba(color.$text-normal, 0.45);

      & .block--lecture-group__row-content__texts__sub,
      & .block--planner-course__text__caption {
        color: rgba(color.$text-lighter, 0.45);
      }
    }

    & > .block__completed-text {
      display: initial;
    }
  }

  & .block__completed-text {
    display: none;
    color: darken(color.$text-normal, 20%);
    font-size: font.$size-smaller;
    line-height: font.$line-height-smaller;
    position: absolute;
    z-index: 1;
    top: 0;
    right: 0;
    padding: calc($block-padding-tb + calc(calc(font.$size-normal - font.$size-smaller) / 2))
      $block-padding-lr
      calc(calc($block-padding-tb - 2px) + calc(calc(font.$size-normal - font.$size-smaller) / 2))
      calc($block-padding-lr - 2px);
    background-color: inherit;
    opacity: $opacity-text-overlay;
    &:hover {
      opacity: 0.15;
    }
  }

  &--course {
    cursor: pointer;

    .subsection--feed &:nth-last-of-type(2) {
      margin-bottom: 0;
    }

    &__title {
      padding-bottom: 6px;
      border-bottom: 1px solid color.$block-line;
      margin-bottom: 6px;

      & > i:first-child {
        margin-right: 4px;
      }
    }
  }

  &--planner-course {
    cursor: pointer;
    display: flex;
    flex-direction: row;
    align-items: center;

    &:last-child {
      margin-bottom: 0;
    }

    &__text {
      flex: 1 1 auto;

      &__caption {
        font-size: font.$size-smaller;
        line-height: font.$line-height-smaller;
        color: color.$text-lighter;
        margin-bottom: 3px;
      }

      &__title {
        font-weight: bold;
        margin-bottom: 2px;
      }
    }

    &__button {
      margin-left: 6px;
    }
  }

  &--course-simple {
    display: flex;
    flex-direction: column;
    justify-content: center;
    min-width: 74px;

    &:last-child {
      margin-bottom: 0;
    }

    &__title {
      text-align: center;
      font-weight: bold;
      margin-bottom: 2px;
    }

    &__subtitle {
      text-align: center;
    }
  }

  &--lecture-simple {
    display: flex;
    flex-direction: column;
    justify-content: center;
    cursor: pointer;

    &__title {
      text-align: center;
      font-weight: bold;
      margin-bottom: 2px;
    }

    &__subtitle {
      text-align: center;
    }
  }

  &--review {
    &__title {
      margin-bottom: 8px;

      strong,
      span {
        margin-right: 6px;
      }
    }

    &__content {
      color: color.$text-light;
      line-height: font.$line-height-normal + font.$delta-line-height-longcontent;
      &--limit-5 {
        overflow: hidden;
        display: -webkit-box; // Remove after line-clamp officially supported
        -webkit-box-orient: vertical; // Remove after line-clamp officially supported
        -webkit-line-clamp: 5; // Remove after line-clamp officially supported
        line-clamp: 5;
        text-overflow: ellipsis;
      }
    }

    &__menus {
      margin-top: 8px;
      margin-bottom: -6px;
      display: flex;
      flex-direction: row;
      justify-content: space-between;
      flex-wrap: wrap;

      &__score {
        margin-right: 8px;
      }

      & > span {
        margin-bottom: 6px;
        flex: 1 1 auto;
        display: inline-block;
        &:last-child {
          text-align: right;
        }

        & > * {
          display: inline-block;
        }
      }
    }
  }

  &--review-write {
    &__title {
      margin-bottom: 8px;

      strong,
      span {
        margin-right: 6px;
      }
    }

    &__content {
      color: color.$text-light;
      line-height: font.$line-height-normal + font.$delta-line-height-longcontent;
      display: block;
      width: 100%;
      height: (font.$line-height-normal + font.$delta-line-height-longcontent) * 9 + 8px * 2;
      border: 1px dashed #aaaaaa;
      padding: 8px;
      border-radius: 2px;
      margin-bottom: 8px;

      &:hover,
      &:focus {
        border-color: #777777;
      }

      &::placeholder {
        color: color.$text-placeholder;
      }
    }

    &__score {
      $option-size: 18px;

      width: fit-content;
      position: relative;
      &:not(:last-child) {
        margin-bottom: $attribute-margin-bottom;
      }

      &__name {
        margin-right: $attribute-name-margin-right;
        padding: calc(calc($option-size - font.$line-height-normal) / 2) 0;
      }

      &__option {
        cursor: pointer;
        &:not(:last-child) {
          margin-right: $attribute-info-margin-between;
        }

        input {
          display: none;
        }

        & > span {
          $padding-tb-base: calc(calc($option-size - font.$line-height-smaller) / 2);
          $offset-y: 1px;

          display: inline-block;
          width: $option-size;
          height: $option-size;
          border-radius: 50%;
          background-color: #d6d6d6;
          text-align: center;
          padding: ($padding-tb-base + $offset-y) 0 ($padding-tb-base - $offset-y) 0;
          font-weight: bold;
          font-size: font.$size-smaller;
          line-height: font.$line-height-smaller;
          color: #ffffff;
        }

        &:hover span {
          background-color: #c6c6c6;
        }

        input:checked ~ span {
          background-color: #868686;
        }
      }

      &::before {
        $thickness: 2px;

        content: '';
        display: block;
        width: ($option-size * 5 + $attribute-info-margin-between * 4);
        height: $thickness;
        background-color: #d6d6d6;
        position: absolute;
        top: calc(50% - #{$thickness} / 2);
        right: 0;
      }
    }

    &__buttons {
      text-align: right;
    }
  }

  &--lecture-group {
    &.block--raised {
      background-color: color.$block-background;
    }

    &__title {
      margin-bottom: 6px;
    }

    &__row {
      margin: 0px (-$block-padding-lr);
      padding: 0 $block-padding-lr 0 ($block-padding-lr + 8px);
      cursor: pointer;

      &:last-child {
        margin-bottom: -$block-padding-tb;
        border-radius: 0px 0px $block-border-radius $block-border-radius;
      }

      &--highlighted {
        background-color: color.$block-background-dark;
      }

      .block--dimmed & {
        cursor: initial;
      }
    }

    &__row-content {
      padding: 6px 0;
      border-top: 1px solid color.$block-line;
      display: flex;
      flex-direction: row;
      pointer-events: none;
      align-items: center;

      *:last-child > & {
        padding-bottom: $block-padding-tb;
      }

      &__texts {
        flex: 1;

        &__main {
          margin-bottom: -2px;
          text-align: left;

          & > * {
            display: inline-block;
            margin-bottom: 2px;
          }
          &__fixed-1 {
            width: 9px;
          }
          &__fixed-2 {
            width: 16px;
          }
        }

        &__sub {
          font-size: font.$size-smaller;
          line-height: font.$line-height-smaller;
          color: color.$text-lighter;
          display: none;
          @include mixin-media-no-hover {
            @at-root .block--lecture-group__row--highlighted #{&} {
              display: block;
            }
          }
          &:first-child {
            margin-bottom: 3px;
          }
          &:last-child {
            margin-top: 3px;
          }
        }
      }

      &__button {
        margin-left: 6px;
        pointer-events: auto;
        cursor: pointer;
        @include mixin-media-portrait {
          display: none;
        }
        @include mixin-media-no-hover {
          .block--lecture-group__row:not(.block--lecture-group__row--highlighted) & {
            display: none;
          }
        }

        &--disable {
          pointer-events: none;
        }
      }
    }
  }

  &--lecture-group-simple {
    &__row {
      margin: 0px (-$block-padding-lr);
      padding: 0 $block-padding-lr 0 $block-padding-lr;
      &:first-child {
        margin-top: -$block-padding-tb;
      }
      &:last-child {
        margin-bottom: -$block-padding-tb;
      }
    }

    &__row-content {
      padding: 6px 0;
      border-top: 1px solid color.$block-line;
      display: flex;
      flex-direction: row;
      pointer-events: none;
      align-items: center;

      *:first-child > & {
        border-top: none;
        padding-top: $block-padding-tb;
      }
      *:last-child > & {
        padding-bottom: $block-padding-tb;
      }

      &__texts {
        flex: 1;
        margin-bottom: -2px;
        text-align: left;

        & > * {
          display: inline-block;
          margin-bottom: 2px;
        }

        &__fixed-1 {
          width: 9px;
        }
        &__fixed-2 {
          width: 16px;
        }
      }
    }
  }

  &--review-simple {
    & > div:first-child {
      color: color.$text-lighter;
      font-size: font.$size-smaller;
      line-height: font.$line-height-smaller;
      margin-bottom: 3px;

      & > span {
        &:not(:first-child) {
          margin-left: 4px;
        }
      }
    }

    & > div:nth-child(2) {
      color: color.$text-light;
      font-size: font.$size-normal;
      line-height: font.$line-height-normal + font.$delta-line-height-longcontent;
      margin-bottom: 4px;
      overflow: hidden;
      max-height: (font.$line-height-normal + font.$delta-line-height-longcontent) * 3; // Fallback, Remove after line-clamp officially supported
      display: -webkit-box; // Remove after line-clamp officially supported
      -webkit-box-orient: vertical; // Remove after line-clamp officially supported
      -webkit-line-clamp: 3; // Remove after line-clamp officially supported
      line-clamp: 3;
      text-overflow: ellipsis;
    }

    & > div:last-child {
      text-align: right;

      & > span {
        display: inline-block;
        &:not(:first-child) {
          margin-left: 8px;
        }
      }
    }
  }

  &--project {
    text-align: center;
    cursor: pointer;

    &__title {
      font-weight: bold;
      margin-bottom: 2px;
    }
  }

  &--semester {
    text-align: center;
    cursor: pointer;

    &__title {
      font-weight: bold;
      margin-bottom: 2px;
    }
  }
}

.block-list {
  #{&} + & {
    margin-top: $block-margin;
  }

  > .block:not(:last-child) {
    margin-bottom: $block-margin;
  }
}

.block-grid {
  display: grid;
  grid-auto-rows: auto;
  gap: $block-margin;
  grid-template-columns: repeat(auto-fill, minmax(144px, 1fr));
  .subsection--various-reviews & {
    margin-bottom: 12px;
    @include mixin-media-landscape {
      grid-template-columns: repeat(auto-fill, minmax(114px, 1fr));
    }
    @include mixin-media-portrait {
      grid-template-columns: repeat(auto-fill, minmax(94px, 1fr));
    }
  }
  .subsection--credit & {
    margin-bottom: 12px;
  }
}

.title {
  font-weight: bold;
  font-size: font.$size-big;
  line-height: font.$line-height-big;
  text-align: center;
  margin-bottom: $title-margin-bottom;

  &:has(+ .subtitle) {
    margin-bottom: 2px;
  }

  .subsection--credit & {
    margin-top: 12px;

    &:not(:first-child) {
      margin-top: 0;
    }
  }
}

.subtitle {
  font-size: font.$size-normal;
  line-height: font.$line-height-normal;
  text-align: center;
  margin-bottom: $title-margin-bottom;

  &:has(+ .buttons) {
    margin-bottom: 4px;
  }
}

.list-title {
  font-weight: initial;
  font-size: font.$size-big;
  line-height: font.$line-height-big;
  margin-bottom: $list-title-margin-bottom;

  &--search {
    cursor: pointer;

    & > *:nth-child(2) {
      margin-left: 6px;
      color: color.$highlight;

      @at-root :hover#{&} {
        color: color.$highlight-dark;
      }
    }

    & > *:nth-child(3) {
      margin-left: 5px;
      color: color.$text-lighter;
      font-size: font.$size-small;
      line-height: font.$line-height-small;

      @at-root :hover#{&} {
        color: color.$text-light;
      }
    }
  }

  &--search-input {
    display: flex;
    flex-direction: row;

    & > *:nth-child(2) {
      flex: auto;
      height: font.$line-height-big;
      margin-left: 6px;
      position: relative;

      & > input {
        width: 100%;
        position: absolute;
        top: 0px;
        z-index: 2;
        line-height: font.$line-height-big + 1px * 2;
        margin: -1px 0;
        color: color.$text-normal;

        &::placeholder {
          color: color.$text-placeholder;
        }
      }

      & > div {
        width: 100%;
        position: absolute;
        top: 0px;
        z-index: 1;
        color: color.$text-placeholder;
        height: 100%;
        overflow: hidden;
        display: none;
      }
      & > input:focus + div {
        display: block;

        & > span:first-child {
          opacity: 0;
        }
      }
    }
  }
}

.small-title {
  font-weight: bold;
  font-size: font.$size-normal;
  line-height: font.$line-height-normal;
  margin-bottom: $title-margin-bottom;

  .subsection--lecture-detail & {
    display: block;
    width: 100%;
    margin-bottom: 8px;

    & > span {
      margin-right: 6px;
    }
  }

  .subsection--license & {
    padding-bottom: 8px;
  }

  .subsection--privacy & {
    padding: 0;
    margin: 8px 0 4px;
  }
}

.detail-title-area {
  margin-bottom: $title-margin-bottom;

  & > *:last-child {
    margin-bottom: 0;
  }

  & > .buttons {
    margin-top: 0;
    text-align: initial;

    & > .text-button {
      font-size: font.$size-small;
      line-height: font.$line-height-small;

      &:not(:first-child) {
        margin-left: 6px;
      }
    }
  }
}

.text-button {
  cursor: pointer;
  &:not(:first-child) {
    margin-left: 8px;
  }

  &,
  &:link {
    color: color.$highlight;
  }

  &:not(&--disabled):hover {
    color: color.$highlight-dark;
  }

  &--black {
    color: color.$text-light;

    &:not(&--disabled):hover {
      color: color.$text-dark;
    }
  }

  & > i + * {
    margin-left: 4px;
  }

  &--right {
    float: right;
  }

  &--disabled {
    pointer-events: none;
    color: color.$text-disable !important;
  }

  &--review-write-block {
    margin-top: 4px;
  }

  .search-area .buttons & {
    margin-left: 8px;
  }
  .attribute & {
    margin-left: 0;
  }
}

.caption {
  font-size: font.$size-smaller;
  line-height: font.$line-height-smaller;
  color: color.$text-placeholder;
}

.attribute {
  display: flex;
  flex-direction: row;
  margin-bottom: $attribute-margin-bottom;
  .block--course & {
    margin-bottom: 6px;
  }
  .search-area & {
    overflow: hidden;
  }
  .subsection--summary & {
    overflow: hidden;
    @include mixin-media-portrait {
      margin-bottom: 0px;
      flex: 1 1 40px;
    }
  }
  &:last-child {
    margin-bottom: 0;
  }

  &--long-info {
    & > * {
      line-height: font.$line-height-normal + 1px * 2;
      margin-top: -1px;
      margin-bottom: -1px;
    }
  }

  &--long-name {
    display: block;
    margin-bottom: $attribute-margin-bottom - 2px;
    & > * {
      display: inline-block;
      margin-bottom: 2px;
    }
  }

  & > *:first-child {
    font-weight: bold;
    margin-right: $attribute-name-margin-right;
    flex: none;

    .subsection--lecture-detail & {
      &.fixed-ko {
        min-width: 23px;
      }
      &.fixed-en {
        min-width: 32px;
      }
    }
    .subsection--summary & {
      &.fixed-ko {
        min-width: 23px;
      }
      &.fixed-en {
        min-width: 23px;
      }
    }
    .subsection--course-manage-right & {
      &.fixed-ko {
        min-width: 55px;
      }
      &.fixed-en {
        min-width: 70px;
      }
    }
  }

  & > *:last-child {
    flex: initial;

    .subsection--summary & {
      > span {
        margin-right: 4px;

        &.focused {
          color: color.$highlight;
        }
      }
    }

    &.search-fields {
      margin-bottom: -$attribute-info-margin-between;
      margin-right: -$attribute-info-margin-between;

      > .search-fields__label {
        display: inline-block;
        margin-bottom: $attribute-info-margin-between;
        margin-right: $attribute-info-margin-between;
        white-space: nowrap;
        &:hover {
          color: color.$text-dark;
        }
        &--dimmed {
          color: color.$text-lighter;
          &:hover {
            color: color.$text-light;
          }
        }

        & > i {
          margin-left: 3px;
        }
      }
    }
  }
}

.scores {
  text-align: center;
  @include mixin-media-landscape {
    margin-top: $score-margin-tb-desktop;
    margin-bottom: $score-margin-tb-desktop;
    @at-root .scores--big#{&} {
      margin-top: $score-margin-tb-desktop-big;
      margin-bottom: $score-margin-tb-desktop-big;
    }
  }
  @include mixin-media-portrait {
    margin-top: $score-margin-tb-mobile;
    margin-bottom: $score-margin-tb-mobile;
  }
  .subsection--lecture-detail & {
    &:last-child {
      margin-bottom: 0;
    }
  }
  .subsection--summary & {
    margin-top: $score-margin-tb-desktop;
    margin-bottom: 0;
    @include mixin-media-portrait {
      margin-top: 0;
      display: flex;
      flex-direction: row;
      &:nth-child(2) {
        flex: 2 2 (30px * 2);
      }
      &:last-child {
        flex: 3 3 (30px * 3);
      }
    }
  }
  .subsection--various-reviews & {
    margin-top: 0;
    margin-bottom: 12px;
  }
  .subsection--my-summary & {
    margin-top: 0;
    margin-bottom: 0;
  }

  & > div {
    display: inline-block;

    @include mixin-media-landscape {
      width: $score-width-desktop;
      @at-root .scores--big#{&} {
        width: $score-width-desktop-big;
      }
    }
    @include mixin-media-portrait {
      width: $score-width-mobile;
      .subsection--summary & {
        flex: 1 1 30px;
        width: 30px;
      }
    }

    & > div:first-child {
      font-weight: 300;
      margin-bottom: 2px;

      @include mixin-media-landscape {
        font-size: $score-font-size-desktop;
        line-height: $score-line-height-desktop;
        @at-root .scores--big#{&} {
          font-size: $score-font-size-desktop-big;
          line-height: $score-line-height-desktop-big;
        }
      }
      @include mixin-media-portrait {
        font-size: $score-font-size-mobile;
        line-height: $score-line-height-mobile;
        .subsection--summary & {
          font-size: 24px;
          line-height: 22px;
        }
      }

      & > span:not(:first-child) {
        font-size: font.$size-small;
        line-height: font.$line-height-small;
        font-weight: initial;
      }

      &.focused,
      & > span.focused {
        color: color.$highlight;
      }
    }

    & > div:last-child {
      font-size: font.$size-smaller;
      line-height: font.$line-height-smaller;
    }
  }
}

.divider {
  &--desktop-horizontal {
    @include mixin-media-landscape {
      border-bottom: 1px solid color.$divider-line;
      margin: $section-padding 0;
    }
  }
  &--desktop-vertical {
    @include mixin-media-landscape {
      border-right: 1px solid color.$divider-line;
      margin: 0 $section-padding;
    }
  }
  &--mobile-horizontal {
    @include mixin-media-portrait {
      border-bottom: 1px solid color.$divider-line;
      margin: $section-padding 0;
    }
  }
  &--mobile-vertical {
    @include mixin-media-portrait {
      border-right: 1px solid color.$divider-line;
      margin: 0 $section-padding;
    }
  }
  .search-area & {
    margin-bottom: 0;
  }
}

.divider-planner {
  &--desktop-horizontal {
    @include mixin-media-landscape {
      border-bottom: 1px solid color.$divider-line;
      margin: $section-padding 0;
    }
  }
  &--desktop-vertical {
    @include mixin-media-landscape {
      border-right: 1px solid color.$normal-line;
      margin: 0 5px; //TODO
    }
  }
  &--mobile-horizontal {
    @include mixin-media-portrait {
      border-bottom: 1px solid color.$divider-line;
      margin: $section-padding 0;
    }
  }
  &--mobile-vertical {
    @include mixin-media-portrait {
      border-right: 1px solid color.$divider-line;
      margin: 0 $section-padding;
    }
  }
  .search-area & {
    margin-bottom: 0;
  }
}

.planner-overlay {
  position: absolute;
  flex: auto;
  display: flex;
  flex-direction: column;
  justify-content: center;
  border-radius: $tile-border-radius;
  z-index: 3;
  overflow: hidden;
  background-color: rgba(color.$block-background-highlight, 0.7);

  &__button {
    text-align: center;
    color: color.$highlight;
    cursor: pointer;

    &:not(:last-child) {
      margin-bottom: 10px;
    }

    &--small {
      font-size: font.$size-small;
      line-height: font.$line-height-small;
    }

    &--disabled {
      color: color.$text-disable;
      pointer-events: none;
    }
  }
}

.buttons {
  margin-top: 10px;
  text-align: right;
}

.search-area {
  position: absolute;
  top: $section-padding;
  left: 0;
  right: 0;
  height: calc(100% - #{$section-padding} * 2);
  z-index: 20;
  display: flex;
  flex-direction: column;

  &--hidden {
    pointer-events: none;
  }

  & :global(.ScrollbarsCustom) {
    flex: 1 1 auto !important;
  }

  & > form {
    flex: 0 0 auto;
    max-height: 100%;
    padding: 0 $section-padding;
    background-color: color.$section-background;
    display: flex;
    flex-direction: column;
    overflow: hidden;
    transition: flex $transition-duration-normal ease-out;

    @at-root .search-area--hidden#{&} {
      flex: 0 1 auto;
    }
  }

  &::after {
    content: '';
    display: block;
    height: 100%;
    flex: 0 0 auto;
  }
}

.min-height-area {
  .subsection--lecture-detail & {
    @include mixin-media-landscape {
      min-height: calc(
        #{$section-height-desktop-lecture-detail} - (#{$section-padding} + (
                #{font.$line-height-big} + 2px
              ) + (#{font.$line-height-normal} + #{font.$delta-line-height-longcontent}) + (
                #{font.$line-height-small} + #{$title-margin-bottom}
              ) + (#{font.$line-height-big} + 8px) + #{$section-padding})
      ) !important;
    }
    @include mixin-media-portrait {
      min-height: calc(
        #{$screen-height} - (#{$header-height} + #{$section-margin-top} + #{$section-padding} + (
                #{font.$line-height-big} + 2px
              ) + (#{font.$line-height-normal} + #{font.$delta-line-height-longcontent}) + (
                #{font.$line-height-small} + #{$title-margin-bottom}
              ) + (#{font.$line-height-big} + 8px) + (#{$section-padding} * 2 + 1px) + #{font.$line-height-normal} +
              #{$section-padding} + (#{$section-margin-bottom} * 2))
      ) !important;
    }
  }
  .subsection--course-reviews & {
    @include mixin-media-landscape {
      min-height: calc(
        #{$screen-height} - (#{$header-height} + #{$section-padding} +
              (#{font.$line-height-big} + 2px) +
              (#{font.$line-height-normal} + #{$title-margin-bottom}) +
              (#{$score-line-height-desktop-big} + 2px + #{font.$line-height-smaller} + 12px) +
              (#{font.$line-height-normal} + #{$title-margin-bottom}) +
              ((#{font.$line-height-normal} + #{$attribute-margin-bottom}) * 2) + #{$section-padding} +
              #{$section-margin-bottom})
      ) !important;
    }
    @include mixin-media-portrait {
      min-height: calc(
        #{$screen-height} - (#{$header-height} + #{$section-margin-top} + #{$section-padding} + (
                #{font.$line-height-big} + 2px
              ) + (#{font.$line-height-normal} + #{$title-margin-bottom}) + (
                #{$score-line-height-mobile} + 2px + #{font.$line-height-smaller} + 12px
              ) + (#{font.$line-height-normal} + #{$title-margin-bottom}) + (
                (#{font.$line-height-normal} + #{$attribute-margin-bottom}) * 2
              ) + #{$section-padding} + (#{$section-margin-bottom} * 2))
      ) !important;
    }
  }
  .subsection--various-reviews & {
    @include mixin-media-landscape {
      min-height: calc(
        #{$screen-height} - (#{$header-height} + #{$section-padding} +
              (#{font.$line-height-big} + #{$title-margin-bottom}) + #{$section-padding} + #{$section-margin-bottom})
      ) !important;
    }
    @include mixin-media-portrait {
      min-height: calc(
        #{$screen-height} - (#{$header-height} + #{$section-margin-top} + #{$section-padding} + (
                #{font.$line-height-big} + #{$title-margin-bottom}
              ) + #{$section-padding} + (#{$section-margin-bottom} * 2))
      ) !important;
    }
  }
}

.placeholder {
  color: color.$text-placeholder;
}

.otlplus-placeholder {
  width: 100%;
  height: 100%;
  display: flex;
  flex-direction: column;
  justify-content: center;
  text-align: center;
  color: color.$text-placeholder;
  font-size: font.$size-normal;
  line-height: font.$line-height-normal;

  & > div {
    flex: none;
    &:first-child {
      margin-top: 0;
      font-size: 20px;
      line-height: 20px;
    }
    &:not(:first-child) {
      margin-top: 12px;
    }
  }

  a {
    color: inherit;

    &:hover {
      color: color.$text-lighter;
    }
  }
}

.list-placeholder {
  display: flex;
  flex-direction: column;
  justify-content: center;

  min-height: 17px + $section-padding * 2;

  white-space: nowrap;

  font-size: 16px;
  line-height: 17px;
  text-align: center;
  color: color.$text-placeholder;

  .subsection--course-list &,
  .subsection--lecture-list &,
  .subsection--taken-lectures & {
    flex: 1 0 auto;
  }

  .subsection--feed & {
    min-height: 218px;
  }
}

.rate {
  text-align: center;
  position: relative;

  &__overlay {
    position: absolute;
    top: 0;
    width: 100%;
    height: 26px;
    background-color: rgba(color.$section-background, 0.8);
    text-align: center;
    font-size: 14px;
    line-height: 15px;
    padding: calc(calc(26px - 17px) / 2) 0;
  }
}

button.disabled {
  color: color.$text-disable !important;
  pointer-events: none;
}

.background-color {
  $base-colors: #f2b9b9, #ffc4b2, #f7c4a1, #f7d4a1, #e5d69b, #dce4a7, #c3e3ab, #b8ecc0, #a1e4c8,
    #9ee7dd, #98dae0, #a8d9ec, #b2cae5, #ccc8e6, #d8bcd4, #eebfce, #d6d6d6, #b4b4b4,
    adjust-color(#e54c65, $saturation: 5%, $lightness: 10%);

  @for $i from 1 through length($base-colors) {
    $base-color: nth($base-colors, $i);
    $dark-color: adjust-color(
      $base-color,
      $saturation: if($i <= 16 or $i >= 19, -5%, 0%),
      $lightness: -10%
    );
    $stripe-color: adjust-color($base-color, $lightness: 3.5%);
    $dark-stripe-color: adjust-color($dark-color, $lightness: 8%);

    &--#{$i} {
      background-color: $base-color;
      &.background-color--dark {
        background-color: $dark-color;
      }
      &.background-color--stripe {
        background: repeating-linear-gradient(
          -45deg,
          $base-color 0px,
          $base-color 4px,
          $stripe-color 4px,
          $stripe-color 8px
        );
      }
      &.background-color--dark.background-color--stripe {
        background: repeating-linear-gradient(
          -45deg,
          $dark-color 0px,
          $dark-color 2px,
          $dark-stripe-color 2px,
          $dark-stripe-color 4px
        );
      }
    }
  }
}

i.icon {
  display: inline-block;
  background: none no-repeat center center;
  vertical-align: top;

  &--lecture-uparrow {
    width: 14px;
    height: 12px;
    background-image: url(../static/icons/lecture_uparrow.svg);
    margin: calc(calc(font.$line-height-normal - 12px) / 2) 0;

    *:hover > & {
      background-image: url(../static/icons/lecture_uparrow_hover.svg);
    }
  }

  &--lecture-downarrow {
    width: 14px;
    height: 12px;
    background-image: url(../static/icons/lecture_downarrow.svg);
    margin: calc(calc(font.$line-height-normal - 12px) / 2) 0;

    *:hover > & {
      background-image: url(../static/icons/lecture_downarrow_hover.svg);
    }
  }

  &--search {
    width: 12px;
    height: 13px;
    background-image: url(../static/icons/search.svg);
    margin: calc(calc(font.$line-height-big - 13px) / 2) 0;

    *:hover > & {
      background-image: url(../static/icons/search_hover.svg);
    }
  }

  &--tab-search {
    width: 13px;
    height: 13px;
    background-image: url(../static/icons/tab_search.svg);

    *:hover > &,
    *.tabs__elem--selected > & {
      background-image: url(../static/icons/tab_search_hover.svg);
    }
  }

  &--tab-basic {
    width: 13px;
    height: 13px;
    background-image: url(../static/icons/tab_basic.svg);

    *:hover > &,
    *.tabs__elem--selected > & {
      background-image: url(../static/icons/tab_basic_hover.svg);
    }
  }

  &--tab-major {
    width: 13px;
    height: 13px;
    background-image: url(../static/icons/tab_major.svg);

    *:hover > &,
    *.tabs__elem--selected > & {
      background-image: url(../static/icons/tab_major_hover.svg);
    }
  }

  &--tab-humanity {
    width: 13px;
    height: 13px;
    background-image: url(../static/icons/tab_humanity.svg);

    *:hover > &,
    *.tabs__elem--selected > & {
      background-image: url(../static/icons/tab_humanity_hover.svg);
    }
  }

  &--tab-cart {
    width: 13px;
    height: 13px;
    background-image: url(../static/icons/tab_cart.svg);

    *:hover > &,
    *.tabs__elem--selected > & {
      background-image: url(../static/icons/tab_cart_hover.svg);
    }
  }

  &--tab-taken {
    width: 13px;
    height: 13px;
    background-image: url(../static/icons/tab_taken.svg);

    *:hover > &,
    *.tabs__elem--selected > & {
      background-image: url(../static/icons/tab_taken_hover.svg);
    }
  }

  &--add-cart {
    width: 13px;
    height: 13px;
    background-image: url(../static/icons/add_cart.svg);
    margin: calc(calc(font.$line-height-normal - 13px) / 2) 0;

    *:hover > & {
      background-image: url(../static/icons/add_cart_hover.svg);
    }

    .block--lecture-group__row-content__button--disable > & {
      background-image: url(../static/icons/add_cart_disabled.svg);
    }
  }

  &--delete-cart {
    width: 13px;
    height: 13px;
    background-image: url(../static/icons/delete_cart.svg);
    margin: calc(calc(font.$line-height-normal - 13px) / 2) 0;

    *:hover > & {
      background-image: url(../static/icons/delete_cart_hover.svg);
    }
  }

  &--add-lecture {
    width: 13px;
    height: 13px;
    background-image: url(../static/icons/add_lecture.svg);
    margin: calc(calc(font.$line-height-normal - 13px) / 2) 0;

    *:hover > & {
      background-image: url(../static/icons/add_lecture_hover.svg);
    }

    .text-button--disabled > &,
    .block--lecture-group__row-content__button--disable > & {
      background-image: url(../static/icons/add_lecture_disabled.svg);
    }
  }

  &--delete-from-table {
    width: 13px;
    height: 13px;
    background-image: url(../static/icons/delete_from_table.svg);
    margin: calc(calc(font.$line-height-normal - 13px) / 2) 0;

    *:hover > & {
      background-image: url(../static/icons/delete_from_table_hover.svg);
    }

    .text-button--disabled > & {
      background-image: url(../static/icons/delete_from_table_disable.svg);
    }
  }

  &--delete-lecture {
    width: 11px;
    height: 11px;
    background-image: url(../static/icons/delete_lecture.svg);

    *:hover > & {
      background-image: url(../static/icons/delete_lecture_hover.svg);
    }
  }

  &--share-googlecalendar {
    width: 19px;
    height: 19px;
    background-image: url(../static/icons/share_googlecalendar.svg);

    *:hover > & {
      background-image: url(../static/icons/share_googlecalendar_hover.svg);
    }

    *.disabled > & {
      background-image: url(../static/icons/share_googlecalendar_disable.svg);
    }
  }

  &--duplicate-table {
    width: 10px;
    height: 11px;
    background-image: url(../static/icons/duplicate_table.svg);
    margin: calc(calc(font.$line-height-small - 11px) / 2) 0;

    *:hover > & {
      background-image: url(../static/icons/duplicate_table_hover.svg);
    }

    *.disabled > & {
      background-image: url(../static/icons/duplicate_table_disable.svg);
    }
  }

  &--delete-table {
    width: 10px;
    height: 11px;
    background-image: url(../static/icons/delete_table.svg);
    margin: calc(calc(font.$line-height-small - 11px) / 2) 0;

    *:hover > & {
      background-image: url(../static/icons/delete_table_hover.svg);
    }

    *.disabled > & {
      background-image: url(../static/icons/delete_table_disable.svg);
    }
  }

  &--add-table {
    width: 11px;
    height: 11px;
    background-image: url(../static/icons/add_table.svg);
    margin: 1px 1px;

    *:hover > & {
      background-image: url(../static/icons/add_table_hover.svg);
    }
  }

  &--checkbox {
    width: 10px;
    height: 12px;
    background-image: url(../static/icons/checkbox_unselected.svg);
    margin: calc(calc(font.$line-height-normal - 12px) / 2) 0;

    *:hover > & {
      background-image: url(../static/icons/checkbox_unselected_hover.svg);
    }

    *:checked + & {
      background-image: url(../static/icons/checkbox_selected.svg);
    }

    *:hover > *:checked + & {
      background-image: url(../static/icons/checkbox_selected_hover.svg);
    }
  }

  &--radio {
    width: 10px;
    height: 12px;
    background-image: url(../static/icons/radio_unselected.svg);
    margin: calc(calc(font.$line-height-normal - 12px) / 2) 0;

    *:hover > & {
      background-image: url(../static/icons/radio_unselected_hover.svg);
    }

    *:checked + & {
      background-image: url(../static/icons/radio_selected.svg);
    }

    *:hover > *:checked + & {
      background-image: url(../static/icons/radio_selected_hover.svg);
    }
  }

  &--lecture-selector {
    width: 10px;
    height: 12px;
    background-image: url(../static/icons/lecture_selector.svg);
  }

  &--status-read {
    width: 10px;
    height: 12px;
    background-image: url(../static/icons/status_read.svg);
    margin: calc(calc(font.$line-height-normal - 12px) / 2) 0;
  }

  &--status-unread {
    width: 10px;
    height: 12px;
    background-image: url(../static/icons/status_unread.svg);
    margin: calc(calc(font.$line-height-normal - 12px) / 2) 0;
  }

  &--close-section {
    width: 15px;
    height: 15px;
    background-image: url(../static/icons/close_section.svg);

    *:hover > & {
      background-image: url(../static/icons/close_section_hover.svg);
    }
  }

  &--star {
    width: 26px;
    height: 26px;
    background-image: url(../static/icons/star.svg);

    *.rate__star--selected > & {
      background-image: url(../static/icons/star_selected.svg);
    }
  }
}

.top-sticky {
  position: sticky;
  top: 0;
  z-index: 10;
  background-color: color.$section-background;
}

.mobile-hidden {
  @include mixin-media-portrait {
    display: none !important;
  }
}

.desktop-hidden {
  @include mixin-media-landscape {
    display: none !important;
  }
}
